# MapShare

位置情報を共有するマップアプリケーション群のプロジェクトです。
PWA対応により、スマートフォンのホーム画面に追加してネイティブアプリのように使用できます。

## プロジェクト構成

```
mapshare/
  L index.html          ... メイン画面（トップページ）
  L firewood/           ... 薪マップ（実装済み）
  L sake/               ... 酒マップ（準備中）
  L beer/               ... ビールマップ（準備中）
```

## 技術スタック

| 項目 | 技術 |
|------|------|
| フロントエンド | Vanilla JavaScript (ES Modules) |
| ビルドツール | Vite (rolldown-vite) |
| 地図ライブラリ | Leaflet + MarkerCluster |
| データベース | Supabase (PostgreSQL) |
| ホスティング | Vercel |
| アイコン | Font Awesome |
| フォント | Google Fonts (Noto Sans JP) |
| PWA | Service Worker + Web App Manifest |

## ディレクトリ構成

```
mapshare/
├── index.html                  ... メイン画面（マップ選択・お問い合わせ）
├── firewood/
│   └── index.html              ... 薪マップ画面
├── sake/
│   └── index.html              ... 酒マップ画面（準備中）
├── beer/
│   └── index.html              ... ビールマップ画面（準備中）
├── src/
│   ├── home.js                 ... メイン画面のJS（Service Worker登録）
│   ├── home.css                ... メイン画面のスタイルシート
│   ├── firewood/
│   │   ├── main.js             ... 薪マップのエントリーポイント（イベント管理・UI制御）
│   │   ├── api.js              ... Supabase REST API通信
│   │   ├── map.js              ... Leaflet地図の初期化・マーカー操作
│   │   ├── utils.js            ... 共通ユーティリティ関数
│   │   ├── constants.js        ... 定数定義（Supabase設定・マップ設定等）
│   │   └── style.css           ... 薪マップ用スタイルシート
│   ├── sake/
│   │   └── main.js             ... 酒マップのエントリーポイント（準備中）
│   └── beer/
│       └── main.js             ... ビールマップのエントリーポイント（準備中）
├── public/
│   ├── img/                    ... マニュアル画像
│   ├── manifest.json           ... PWAマニフェスト
│   └── service-worker.js       ... Service Worker（オフライン対応）
├── package.json                ... プロジェクト設定
├── vite.config.js              ... Viteビルド設定（マルチページ対応）
└── vercel.json                 ... Vercelデプロイ設定
```

## 開発環境のセットアップ

```bash
npm install
npm run dev
```

## ビルド

```bash
npm run build
```

---

## メイン画面（トップページ）

### 概要

MapShareのトップページ。各マップへのナビゲーションと、お問い合わせ機能を提供する。

### 要件定義

#### 画面構成

- ヘッダー：アプリ名「MapShare」を表示
- ヒーローセクション：キャッチコピー「みんなで作る共有マップ」を表示
- マップカードグリッド：各マップへの導線をカード形式で表示
- お問い合わせボタン：開発者への要望・問い合わせフォームを開く
- フッター：コピーライト表示

#### 機能要件

##### マップナビゲーション

- 各マップ（薪マップ・酒マップ・ビールマップ）をカード形式で表示する
- カードをタップ/クリックすると対応するマップ画面に遷移する
- 準備中のマップには「準備中」バッジを表示する
- カードにはアイコン・タイトル・説明文を含める

##### お問い合わせ（要望）機能

- メイン画面にお問い合わせボタンを設置する
- ボタンをタップ/クリックするとお問い合わせモーダルを表示する
- フォーム項目：お問い合わせ種別（要望 / 不具合報告 / その他）、内容（テキストエリア）
- 送信先：Supabaseのお問い合わせテーブルに保存
- 送信完了後にトースト通知で完了メッセージを表示する

##### PWA対応

- Service Workerの登録
- ホーム画面への追加対応
- オフライン時のフォールバック表示

#### 非機能要件

- レスポンシブデザイン（PC・タブレット・スマートフォン対応）
- モバイルファーストデザイン
- タッチ操作最適化

### 実装状況

- [x] ヘッダー表示
- [x] マップカードグリッド（3種類のマップへの導線）
- [x] 準備中バッジの表示
- [x] レスポンシブデザイン
- [x] PWA対応（Service Worker登録）
- [ ] お問い合わせモーダルの実装

---

## 薪マップ（firewood）

キャンプユーザー同士で薪の販売場所を地図上で共有するWebアプリケーションです。

### 主な機能

- 薪販売場所のマップ表示（ピン表示・クラスタリング）
- 新規登録 / 編集 / 削除
- 薪の種類・キーワードによるフィルター検索
- 現在地取得・地図からの座標選択
- 不適切な情報の通報機能
- お問い合わせフォーム
- ヘルプ表示機能（操作マニュアル）
- PWA対応（Service Worker）

### データモデル（firewood_locations テーブル）

| フィールド名 | 型 | 説明 |
|------------|-----|------|
| id | text | レコードID（自動生成） |
| location_name | text | 場所名 |
| wood_type | text | 薪の種類（ナラ、クヌギ、スギ等） |
| price | number | 価格 |
| latitude | number | 緯度 |
| longitude | number | 経度 |
| notes | text | 備考 |
| updated_at | timestamp | 最終更新日 |
| report_count | number | 通報回数 |

---

## 今後の展開予定

### 酒マップ（sake）/ ビールマップ（beer）

- 地ビール・日本酒の**製造元**をマップにプロットする
- 情報量を整理するため製造元のみを表記
- ユーザーからの情報登録も受け付ける

### タスク一覧

- [x] メイン画面の作成（mapshare トップページ）
- [ ] メイン画面にお問い合わせ機能を追加
- [ ] 酒マップの画面作成
- [ ] ビールマップの画面作成
- [ ] DB構築（3画面分の保管場所選定・容量調査）
- [ ] サーバ構成の調査・切替
- [ ] マニュアル作成

### データ管理

- Supabase を使用したDB管理
- GitHub によるソース管理
